
&НаКлиенте
Процедура ВыбратьДиректорию(Команда)
	ДиалогОткрытияФайла = Новый ДиалогВыбораФайла(РежимДиалогаВыбораФайла.ВыборКаталога);
	ДиалогОткрытияФайла.ПолноеИмяФайла = "";
	//ДиалогОткрытияФайла.МножественныйВыбор = Истина;
	ДиалогОткрытияФайла.Заголовок = "Выберите каталог";
	Если ДиалогОткрытияФайла.Выбрать() Тогда
	    //МассивФайлов = ДиалогОткрытияФайла.ВыбранныеФайлы;
	    //Для Каждого ИмяФайла Из МассивФайлов Цикл
		ВыбратьДиректориюНаСервере(ДиалогОткрытияФайла.Каталог);
	    //КонецЦикла;
	Иначе
	    //Предупреждение(НСтр("ru = 'Файл(ы) не выбран!'; en = 'File(s) not selected!'"));
	КонецЕсли;	
	
КонецПроцедуры

&НаСервере
Процедура ВыбратьДиректориюНаСервере(Директория)
	ОбъектСервер = РеквизитФормыВЗначение("Объект");
	ОбъектСервер.ЗаполнитьФайлы(Директория);
	ЗначениеВРеквизитФормы(ОбъектСервер, "Объект");
КонецПроцедуры

&НаКлиенте
Процедура СоздатьКаталогиИФайлы(Команда)
	СоздатьКаталогиИФайлыНаСервере();
КонецПроцедуры

&НаСервере
Процедура СоздатьКаталогиИФайлыНаСервере()
	ОбъектСервер = РеквизитФормыВЗначение("Объект");
	ОбъектСервер.СоздатьКаталогиИФайлы();
	ЗначениеВРеквизитФормы(ОбъектСервер, "Объект");
КонецПроцедуры

&НаКлиенте
Процедура ИерархияВФормат1С(Команда)
	ИерархияВФормат1СНаСервере();
КонецПроцедуры

&НаСервере
Процедура ИерархияВФормат1СНаСервере()
	ОбъектСервер = РеквизитФормыВЗначение("Объект");
	ОбъектСервер.ИерархияВФормат1С();
	ЗначениеВРеквизитФормы(ОбъектСервер, "Объект");
КонецПроцедуры

&НаСервереБезКонтекста
Функция ПолучитьСписокБазНаСервере()
	Список = Новый Массив;
	Список.Добавить(Новый Структура("Наименование, СтрокаПодключения, Пользователь, Пароль",
									"тест", "\\psf\Home\Documents\InfoBase1", "", ""));
	Возврат Список;
КонецФункции


&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	СписокБаз = ПолучитьСписокБазНаСервере();
	Для Каждого База из СписокБаз Цикл
		СтрокаСБазой = Объект.БазыДанных.Добавить();
		ЗаполнитьЗначенияСвойств(СтрокаСБазой, База); 
	КонецЦикла;
	
КонецПроцедуры


&НаКлиенте
Процедура ЭкспортБД(Команда)
	ТекущаяСтрока = Элементы.БазыДанных.ТекущиеДанные;
	Если ТекущаяСтрока <> Неопределено Тогда
		Описание = Новый Структура("СтрокаПодключения, Пользователь, Пароль", ТекущаяСтрока.СтрокаПодключения, ТекущаяСтрока.Пользователь, ТекущаяСтрока.Пароль);
		ЭкспортБДНаСервере(Описание);
	КонецЕсли;
КонецПроцедуры


&НаСервере
Процедура ЭкспортБДНаСервере(ОписаниеПодключения)
	ОбъектСервер = РеквизитФормыВЗначение("Объект");
	ОбъектСервер.ЭкспортБДВФайлы(ОписаниеПодключения);
	ЗначениеВРеквизитФормы(ОбъектСервер, "Объект");	
КонецПроцедуры


&НаКлиенте
Процедура ОбновитьСписок(Команда)
	Если Объект.Директория <> "" Тогда
		ВыбратьДиректориюНаСервере(Объект.Директория);
	КонецЕсли;
КонецПроцедуры

